openapi: 3.0.0
info:
  title: SkillHive API
  description: |
    Training curriculum and knowledge management API for martial arts.

    ## Authentication

    Most endpoints require authentication using a JWT bearer token.

    ### How to get a token:

    1. **Generate a token using the CLI:**
       ```bash
       make token USER_NUM=1
       ```

    2. **Click the "Authorize" button** (ðŸ”“ lock icon in the top right)

    3. **Paste the token** in the "Value" field (without "Bearer" prefix)

    4. **Click "Authorize"** - You're ready to test endpoints!

    The lock icons will turn closed (ðŸ”’) when you're authenticated.
  version: "1.0"
  contact: {}
servers:
  - url: http://localhost:3001
    description: Local development server
tags:
  - name: users
    description: User management
  - name: disciplines
    description: Martial arts disciplines
  - name: categories
    description: Technique categories
  - name: techniques
    description: Techniques and skills
  - name: tags
    description: Tag management
  - name: reference-assets
    description: Media assets (videos, images, web links)
  - name: curricula
    description: Training curricula
paths:
  /api/v1/auth/login:
    $ref: "./paths/auth.yaml#/login"
  /api/v1/health:
    $ref: "./paths/health.yaml#/health"
  /api/v1/users:
    $ref: "./paths/users.yaml#/list"
  /api/v1/users/me:
    $ref: "./paths/users.yaml#/me"
  /api/v1/users/{id}:
    $ref: "./paths/users.yaml#/detail"
  /api/v1/disciplines:
    $ref: "./paths/disciplines.yaml#/list"
  /api/v1/disciplines/{id}:
    $ref: "./paths/disciplines.yaml#/detail"
  /api/v1/categories:
    $ref: "./paths/categories.yaml#/list"
  /api/v1/categories/{id}:
    $ref: "./paths/categories.yaml#/detail"
  /api/v1/techniques:
    $ref: "./paths/techniques.yaml#/list"
  /api/v1/techniques/{id}:
    $ref: "./paths/techniques.yaml#/detail"
  /api/v1/tags:
    $ref: "./paths/tags.yaml#/list"
  /api/v1/tags/{id}:
    $ref: "./paths/tags.yaml#/detail"
  /api/v1/reference-assets:
    $ref: "./paths/reference-assets.yaml#/list"
  /api/v1/reference-assets/{id}:
    $ref: "./paths/reference-assets.yaml#/detail"
  /api/v1/curricula:
    $ref: "./paths/curricula.yaml#/list"
  /api/v1/curricula/{id}:
    $ref: "./paths/curricula.yaml#/detail"
  /api/v1/curricula/{id}/elements:
    $ref: "./paths/curricula.yaml#/elements"
  /api/v1/curricula/{id}/elements/{elementId}:
    $ref: "./paths/curricula.yaml#/element_detail"
  /api/v1/curricula/{id}/elements/reorder:
    $ref: "./paths/curricula.yaml#/reorder"
components:
  securitySchemes:
    bearer:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        Enter your JWT token in the field below.

        Generate a token with: `make token USER_NUM=1`

        Paste the token value (without "Bearer" prefix)
  schemas:
    $ref: "./components/schemas.yaml"
